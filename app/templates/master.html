<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <!-- Bootstrap is developed mobile first, a strategy in which we optimize code for mobile devices first and then scale up components 
      as necessary using CSS media queries. To ensure proper rendering and touch zooming for all devices, add this responsive viewport here.
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT" crossorigin="anonymous"></script> 
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"/>

    <title>Helder's Stock Predictor</title>

    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>
    <script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <!--
      NOTE: Credit to https://getbootstrap.com/docs/5.1/examples/dashboard/ and https://bbbootstrap.com/snippets/bootstrap-5-sidebar-menu-toggle-button-34132202
      for providing a starting Bootstrap HTML layout with a starter HTML because it had the top header with a Search bar, and left menu navigation
    -->
  </head>    
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="https://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
    <script>
    $(document).ready(function(){
        // Defining the local dataset
        var mysymbols = {{symbols | safe}};
         
        // Constructing the suggestion engine
        var symbols = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.whitespace,
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            local: mysymbols
        });
        
        // Initializing the typeahead
        $('.typeahead').typeahead({
            hint: true,
            highlight: true, /* Enable substring highlighting */
            minLength: 1 /* Specify minimum characters required for showing result */
        },
        {
            name: 'symbols',
            source: symbols
        });
    });  
  </script>

    <body id="body-pd">
      <header class="header" id="header">
          <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
          <input class="typeahead form-control" type="text" placeholder="Search US Stock..." aria-label="Search">
          <button type="button" data-bs-toggle="tooltip" data-bs-placement="right" title="Train this stock"><i class='bx bxs-graduation nav_icon'></i></button>
      </header>
      <div class="l-navbar" id="nav-bar">
        <nav class="nav">
          <div> <a href="#" class="nav_logo"> <i class='bx bx-home nav_logo-icon'></i> <span class="nav_logo-name">Stock Predictor</span> </a>
            <div class="nav_list"> 
              <a href="#" class="nav_link active" data-bs-toggle="tooltip" data-bs-placement="right" title="Train the model for your stock(s)"> <i class='bx bxs-graduation nav_icon'></i> <span class="nav_name">Train</span> </a> 
              <a href="#" class="nav_link" data-bs-toggle="tooltip" data-bs-placement="right" title="Predict prices on the stock models trained"> <i class='bx bx-line-chart nav_icon'></i> <span class="nav_name">Predict</span> </a> 
              <a href="#" class="nav_link" data-bs-toggle="tooltip" data-bs-placement="right" title="See other stock recommendations"> <i class='bx bx-like nav_icon'></i> <span class="nav_name">Recommendations</span> </a> 
              <hr class="nav_logo"/>
              <a href="https://github.com/hmelendez001" target="_blank" class="nav_link"> <i class='bx bxl-github nav_icon' data-bs-toggle="tooltip" data-bs-placement="right" title="See my GitHub page"></i> <span class="nav_name">GitHub</span> </a> 
              <a href="https://linkedin.com/in/hmelende" target="_blank" class="nav_link"> <i class='bx bxl-linkedin nav_icon' data-bs-toggle="tooltip" data-bs-placement="right" title="See my LinkedIn page"></i> <span class="nav_name">LinkedIn</span> </a> 
              <a href="https://twitter.com/@MelendezHelder" target="_blank" class="nav_link"> <i class='bx bxl-twitter nav_icon' data-bs-toggle="tooltip" data-bs-placement="right" title="See my Twitter page"></i> <span class="nav_name">Twitter</span> </a>
              <a href="https://hmelendez001.github.io" target="_blank" class="nav_link"> <i class='bx bx-book nav_icon' data-bs-toggle="tooltip" data-bs-placement="right" title="See my Blog page"></i> <span class="nav_name">Blog</span> </a>
            </div>
          </div> <a href="https://udacity.com" target="_blank" class="nav_link"> <i class="iconify" data-icon="cib:udacity" data-bs-toggle="tooltip" data-bs-placement="right" title="Udacity program page"></i> <span class="nav_name">Udacity</span> </a>
        </nav>
      </div>

      <!--Container Main start-->
      <div class="height-100 bg-light">
        <h4>Find a stock and train a model</h4>
        <div class="row">
          {% for id in ids %}
            <div class="col">
              <div id="{{id}}"></div>
            </div>
          {% endfor %}
        </div>

        {% for table in tables %}
          {{titles[loop.index]}}
          {{table|safe}}
        {% endfor %}
      </div>
      <!--Container Main end-->
      <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='scripts/dashboard.js') }}"></script>
  
    <script>
      feather.replace()
    </script>
  </body>

  <footer>
    <script type="text/javascript">
        // plots the figure with id
        // id much match the div id above in the html
        var figures = {{figuresJSON | safe}};
        var ids = {{ids | safe}};
        for(var i in figures) {
            Plotly.plot(ids[i],
                figures[i].data,
                figures[i].layout || {});
        }
    </script>
</footer>
</html>